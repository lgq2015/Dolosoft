/// <reference types="node" />
import { Signal } from "./signals";
import { inspect } from "util";
export declare class Script {
    destroyed: Signal<ScriptDestroyedHandler>;
    message: Signal<ScriptMessageHandler>;
    private impl;
    private exportsProxy;
    private logHandlerImpl;
    constructor(impl: any);
    readonly exports: ScriptExports;
    logHandler: ScriptLogHandler;
    load(): Promise<void>;
    unload(): Promise<void>;
    eternalize(): Promise<void>;
    post(message: any, data?: Buffer | null): Promise<void>;
    [inspect.custom](depth: any, options: any): string;
}
export interface ScriptOptions {
    name?: string;
    runtime?: ScriptRuntime;
}
export declare enum ScriptRuntime {
    Default = "default",
    Duk = "duk",
    V8 = "v8"
}
export declare type ScriptDestroyedHandler = () => void;
export declare type ScriptMessageHandler = (message: Message, data: Buffer | null) => void;
export declare type ScriptLogHandler = (level: LogLevel, text: string) => void;
export declare type Message = SendMessage | ErrorMessage;
export declare enum MessageType {
    Send = "send",
    Error = "error"
}
export interface SendMessage {
    type: MessageType.Send;
    payload: any;
}
export interface ErrorMessage {
    type: MessageType.Error;
    description: string;
    stack?: string;
    fileName?: string;
    lineNumber?: number;
    columnNumber?: number;
}
export interface ScriptExports {
    [name: string]: (...args: any[]) => Promise<any>;
}
export declare enum LogLevel {
    Info = "info",
    Warning = "warning",
    Error = "error"
}
